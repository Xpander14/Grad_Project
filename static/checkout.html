<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Home Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/index.css">
    <style>
        .checkout-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .booking-summary {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        .payment-section {
            border-top: 1px solid #dee2e6;
            padding-top: 2rem;
        }
        .services-list {
            margin: 1rem 0;
        }
        .service-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }
        .total-amount {
            font-size: 1.2rem;
            font-weight: bold;
            text-align: right;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid #dee2e6;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="./index.html"><img src="./Images/logo.png" alt="Home Hub"></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./aboutus.html">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./serves.html">Services</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./booking.html">Booking</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container checkout-container">
        <h2 class="text-center mb-4">Checkout</h2>
        
        <div class="booking-summary">
            <h4>Booking Summary</h4>
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Date:</strong> <span id="bookingDate">Loading...</span></p>
                    <p><strong>Time:</strong> <span id="bookingTime">Loading...</span></p>
                    <p><strong>Name:</strong> <span id="customerName">Loading...</span></p>
                </div>
                <div class="col-md-6">
                    <p><strong>Address:</strong> <span id="customerAddress">Loading...</span></p>
                    <p><strong>Mobile:</strong> <span id="customerMobile">Loading...</span></p>
                </div>
            </div>

            <h5 class="mt-4">Selected Services</h5>
            <div class="services-list" id="servicesList">
                <!-- Services will be populated here -->
            </div>
            <div class="total-amount">
                Total Amount: <span id="totalAmount">Loading...</span>
            </div>
        </div>

        <div class="payment-section">
            <h4 class="mb-4">Payment Details</h4>
            <form id="paymentForm">
                <div class="mb-4">
                    <label class="form-label">Payment Method</label>
                    <div class="d-flex gap-3">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="cashPayment" value="cash" checked>
                            <label class="form-check-label" for="cashPayment">
                                Cash
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="cardPayment" value="card">
                            <label class="form-check-label" for="cardPayment">
                                Card
                            </label>
                        </div>
                    </div>
                </div>

                <div id="cardDetails" style="display: none;">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="cardName" class="form-label">Name on Card</label>
                            <input type="text" class="form-control" id="cardName">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="cardNumber" class="form-label">Card Number</label>
                            <input type="text" class="form-control" id="cardNumber">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="expiryMonth" class="form-label">Expiry Month</label>
                            <input type="text" class="form-control" id="expiryMonth" placeholder="MM">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="expiryYear" class="form-label">Expiry Year</label>
                            <input type="text" class="form-control" id="expiryYear" placeholder="YYYY">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="cvv" class="form-label">CVV</label>
                            <input type="text" class="form-control" id="cvv">
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-dark">Confirm Payment</button>
                </div>
            </form>
        </div>
    </div>

    <footer class="footer text-light">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5 class="text-uppercase">Home Hub</h5>
                    <p><strong>Contact Us</strong></p>
                    <p>Email: <a href="mailto:info@homehub.com">info@homehub.com</a></p>
                    <p>Phone: 555-607-8001</p>
                    <p>Address: 1234 Main St, Monrovia City, Starfort State 01245</p>
                </div>
                <div class="col-md-4 footermidel">
                    <ul class="list-unstyled">
                        <li><a href="./index.html">Home</a></li>
                        <li><a href="./aboutus.html">About Us</a></li>
                        <li><a href="./serves.html">Services</a></li>
                        <li><a href="./booking.html">Booking</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5>Subscribe to news</h5>
                    <form>
                        <div class="input-group">
                            <input type="email" class="form-control" placeholder="Email">
                            <button class="btn subscribe-btn">Subscribe</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="text-center mt-3">
                <p>&copy; 2024 Home Hub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Service prices in EGP
        const servicePrices = {
            'Cooking': 500,
            'Gardening': 1000,
            'Maintenance': 600,
            'Dry-Clean': 250,
            'Babysitting': 900,
            'Cleaning': 400
        };

        // Function to get URL parameters
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                date: params.get('date'),
                time: params.get('time'),
                name: params.get('name'),
                address: params.get('address'),
                mobile: params.get('mobile'),
                services: params.getAll('services')
            };
        }

        // Function to calculate total amount
        function calculateTotal(services) {
            return services.reduce((total, service) => total + (servicePrices[service] || 0), 0);
        }

        // Function to populate booking details
        function populateBookingDetails() {
            const params = getUrlParams();
            
            document.getElementById('bookingDate').textContent = params.date || 'Not provided';
            document.getElementById('bookingTime').textContent = params.time || 'Not provided';
            document.getElementById('customerName').textContent = params.name || 'Not provided';
            document.getElementById('customerAddress').textContent = params.address || 'Not provided';
            document.getElementById('customerMobile').textContent = params.mobile || 'Not provided';

            // Populate services and their prices
            const servicesList = document.getElementById('servicesList');
            servicesList.innerHTML = '';
            
            params.services.forEach(service => {
                const price = servicePrices[service];
                const serviceItem = document.createElement('div');
                serviceItem.className = 'service-item';
                serviceItem.innerHTML = `
                    <span>${service}</span>
                    <span>${price.toLocaleString()} EGP</span>
                `;
                servicesList.appendChild(serviceItem);
            });

            // Calculate and display total
            const total = calculateTotal(params.services);
            document.getElementById('totalAmount').textContent = `${total.toLocaleString()} EGP`;
        }

        // Handle payment method change
        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const cardDetails = document.getElementById('cardDetails');
                const cardInputs = cardDetails.querySelectorAll('input');
                
                if (this.value === 'card') {
                    cardDetails.style.display = 'block';
                    cardInputs.forEach(input => input.required = true);
                } else {
                    cardDetails.style.display = 'none';
                    cardInputs.forEach(input => input.required = false);
                }
            });
        });

        // Handle payment form submission
        document.getElementById('paymentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            
            if (paymentMethod === 'cash') {
                alert('Cash payment will be collected upon service delivery.');
            } else {
                alert('Card payment processed successfully!');
            }
            
            // Redirect to home page
            window.location.href = 'index.html';
        });

        // Initialize the page
        window.onload = function() {
            populateBookingDetails();
        };
    </script>
</body>
</html>